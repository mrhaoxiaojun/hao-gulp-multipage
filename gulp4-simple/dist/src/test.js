"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};window.console&&(console=console||{log:function(){}}),function(t,e){"function"==typeof define&&define.cmd?define(e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e():t.jeDate=e(window.jQuery||$)}(void 0,function(){function N(t){return window.parseInt(t,10)}var P={},e=document,T=/\w+|d+/g,i="jedateblue",l="YYYY-MM-DD hh:mm:ss",s="1900-01-01 00:00:00",o="2099-12-31 23:59:59";function a(t,e){this.opts=e,this.valCell=t,this.init()}$.fn.jeDate=function(t){return this.each(function(){return new a($(this),t||{})})},$.extend({jeDate:function(t,e){return $(t).each(function(){return new a($(this),e||{})})}}),P.docScroll=function(t){return t=t?"scrollLeft":"scrollTop",e.body[t]|e.documentElement[t]},P.winarea=function(t){return e.documentElement[t?"clientWidth":"clientHeight"]},P.isShow=function(t,e){t.css({display:1!=e?"none":"block"})},P.isLeap=function(t){return t%100!=0&&t%4==0||t%400==0},P.getDaysNum=function(t,e){var a=31;switch(N(e)){case 2:a=P.isLeap(t)?29:28;break;case 4:case 6:case 9:case 11:a=30}return a},P.getYM=function(t,e,a){var n=new Date(t,e-1);return n.setMonth(e-1+a),{y:n.getFullYear(),m:n.getMonth()+1}},P.getPrevMonth=function(t,e,a){return P.getYM(t,e,0-(a||1))},P.getNextMonth=function(t,e,a){return P.getYM(t,e,a||1)},P.digit=function(t){return t<10?"0"+(0|t):t},P.IsNum=function(t){return null!=t&&""!=t&&!isNaN(t)},P.parse=function(n,t,e){n=n.concat(t);var i="hh:mm"==P.parseCheck(e,!1).substring(0,5),s=2;return e.replace(/YYYY|MM|DD|hh|mm|ss/g,function(t,e){var a=i?++s:n.index=0|++n.index;return P.digit(n[a])})},P.parseCheck=function(t,e){var a=[];return t.replace(/YYYY|MM|DD|hh|mm|ss/g,function(t,e){a.push(t)}),a.join(1==e?"-":":")},P.checkFormat=function(t){var a=[];return t.replace(/YYYY|MM|DD|hh|mm|ss/g,function(t,e){a.push(t)}),a.join("-")},P.parseMatch=function(t){return t.split(" ")[0].match(T)},P.checkDate=function(t){var e=t.match(T);if(isNaN(e[0])||isNaN(e[1])||isNaN(e[2]))return!1;if(12<e[1]||e[1]<1)return!1;if(e[2]<1||31<e[2])return!1;if((4==e[1]||6==e[1]||9==e[1]||11==e[1])&&30<e[2])return!1;if(2==e[1]){if(29<e[2])return!1;if((e[0]%100==0&&e[0]%400!=0||e[0]%4!=0)&&28<e[2])return!1}return!0},P.initDates=function(t,e){var a,n;e=e||"YYYY-MM-DD hh:mm:ss","string"==typeof t?a=new Date(1e3*N(t.substring(0,10))):(t|=0,n=(a=new Date).getTime()+864e5*t,a.setTime(n));var i=a.getFullYear(),s=a.getMonth()+1,o=a.getDate(),r=a.getHours(),l=a.getMinutes(),d=a.getSeconds();return P.parse([i,P.digit(s),P.digit(o)],[P.digit(r),P.digit(l),P.digit(d)],e)},P.montharr=[1,2,3,4,5,6,7,8,9,10,11,12],P.weeks=["日","一","二","三","四","五","六"],P.isValHtml=function(t){return/textarea|input/.test(t[0].tagName.toLocaleLowerCase())},P.isBool=function(t){return null==t||1==t},P.addDateTime=function(t,e,a,n){var i="hh-mm"==P.checkFormat(n).substring(0,5)?t.replace(/^(\d{2})(?=\d)/g,"$1,"):t.substr(0,4).replace(/^(\d{4})/g,"$1,")+t.substr(4).replace(/^(\d{2})(?=\d)/g,"$1,"),s=P.IsNum(t)?i.match(T):t.match(T),o=new Date,r=N(s[0]),l=null==s[1]?o.getMonth()+1:N(s[1]),d=null==s[2]?o.getDate():N(s[2]),c=null==s[3]?o.getHours():N(s[3]),h=null==s[4]?o.getMinutes():N(s[4]),u=null==s[5]?o.getMinutes():N(s[5]),m=new Date(r,P.digit(l)-1,"DD"==a?d+e:d,"hh"==a?c+e:c,"mm"==a?h+e:h,P.digit(u));return P.parse([m.getFullYear(),m.getMonth()+1,m.getDate()],[m.getHours(),m.getMinutes(),m.getSeconds()],n)},P.boxCell="#jedatebox";var u=a.prototype;return u.init=function(){var e=this,r=e.opts,t=null==r.zIndex?2099:r.zIndex,a=null!=r.isinitVal&&0!=r.isinitVal,n=$("<div id="+P.boxCell.replace(/\#/g,"")+" class='jedatebox "+(r.skinCell||i)+"'></div");P.fixed=P.isBool(r.fixed),n.attr("author","chen guojun--www.jayui.com--version:3.5"),n.css({"z-index":t,position:1==P.fixed?"absolute":"fixed",display:"block"});a&&P.isBool(r.insTrigger)&&e.valCell.each(function(){var t,e,a,n,i,s,o;t=$(this),a=r.format||l,n=r.initAddVal||[0],i=1==n.length?(e=n[0],"DD"):(e=n[0],n[1]),s=P.initDates(0,a),o=P.addDateTime(s,e,i,a),""==(t.val()||t.text())?P.isValHtml(t)?t.val(o):t.text(o):P.isValHtml(t)?t.val():t.text()}),P.isBool(r.insTrigger)?e.valCell.on("click",function(t){t.stopPropagation(),0<$(P.boxCell).length||(P.format=r.format||l,P.minDate=r.minDate||s,P.maxDate=r.maxDate||o,$("body").append(n),e.setHtml(r))}):(P.format=r.format||l,P.minDate=r.minDate||s,P.maxDate=r.maxDate||o,$("body").append(n),e.setHtml(r))},u.orien=function(t,e,a){var n,i,s,o,r=P.fixed?e[0].getBoundingClientRect():t[0].getBoundingClientRect();P.fixed?(i=r.right+t.outerWidth()/1.5>=P.winarea(1)?r.right-t.outerWidth():r.left+(a?0:P.docScroll(1)),n=r.bottom+ +t.outerHeight()<=P.winarea()?r.bottom-1:r.top>t.outerHeight()/1.5?r.top-t.outerHeight()-1:P.winarea()-t.outerHeight(),s=Math.max(n+(a?0:P.docScroll())+1,1)+"px",o=i+"px"):(o=s="50%",t.css({"margin-top":-r.height/2,"margin-left":-r.width/2})),t.css({top:s,left:o})},u.dateClose=function(){$(P.boxCell).remove()},u.setHtml=function(a){var t,e,n,i=this,s=i.valCell,o=$(P.boxCell),r="",l="",d=new Date,c=P.checkFormat(P.format),h="YYYY-MM"==c||"YYYY"==c,u="hh-mm"==c.substring(0,5);P.formatType=c,""==(s.val()||s.text())?(l=[d.getFullYear(),d.getMonth()+1,d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds()],P.currDate=new Date(l[0],N(l[1])-1,l[2],l[3],l[4],l[5]),P.ymdDate=l[0]+"-"+P.digit(l[1])+"-"+P.digit(l[2])):(t=P.isValHtml(s)?s.val():s.text(),e=u?t.replace(/^(\d{2})(?=\d)/g,"$1,"):t.substr(0,4).replace(/^(\d{4})/g,"$1,")+t.substr(4).replace(/^(\d{2})(?=\d)/g,"$1,"),n=P.IsNum(t)?e.match(T):t.match(T),u?(l="hh-mm"==c?[n[0],n[1],d.getSeconds()]:[n[0],n[1],n[2]],P.currDate=new Date(d.getFullYear(),d.getMonth()-1,d.getDate())):(l=[n[0],n[1],n[2],null==n[3]?d.getHours():n[3],null==n[4]?d.getMinutes():n[4],null==n[5]?d.getSeconds():n[5]],P.currDate=new Date(l[0],N(l[1])-1,l[2],l[3],l[4],l[5]),P.ymdDate=l[0]+"-"+P.digit(l[1])+"-"+P.digit(l[2]))),P.currMonth=l[1],P.currDays=l[2];var m,f,p='<div class="jedatetop">'+(h?'<div class="jedateym" style="width:100%;"><i class="prev triangle ymprev"></i><span class="jedateyy"><em class="jedateyearmonth"></em></span><i class="next triangle ymnext"></i></div>':'<div class="jedateym" style="width:50%;"><i class="prev triangle yearprev"></i><span class="jedateyy" ym="24"><em class="jedateyear"></em><em class="pndrop"></em></span><i class="next triangle yearnext"></i></div><div class="jedateym" style="width:50%;"><i class="prev triangle monthprev"></i><span class="jedatemm" ym="12"><em class="jedatemonth"></em><em class="pndrop"></em></span><i class="next triangle monthnext"></i></div>')+"</div>",y=h?"YYYY"==c?'<ul class="jedayy"></ul>':'<ul class="jedaym"></ul>':'<div class="jedatetopym" style="display: none;"><ul class="ymdropul"></ul><p><span class="jedateymchle">&lt;&lt;</span><span class="jedateymchri">&gt;&gt;</span><span class="jedateymchok">关闭</span></p></div>',g='<div class="jedatebot">'+(h?"YYYY"==c?'<div class="botflex jedatebtn"><span class="jedateok" style="width:47.8%">确认</span><span class="jedateclear" style="width:47.8%">清空</span></div>':'<div class="botflex jedatebtn"><span class="jedateclear">清空</span><span class="jedatetodaymonth">本月</span><span class="jedateok">确认</span></div>':'<div class="botflex jedatehmsshde"><ul class="jedatehms"><li><input type="text" /></li><i>:</i><li><input type="text" /></li><i>:</i><li><input type="text" /></li></ul></div><div class="botflex jedatebtn"><span class="jedateclear">清空</span><span class="jedatetodaymonth">今天</span><span class="jedateok">确认</span></div>')+"</div>",v='<div class="jedateprophms '+(u?"jedatepropfix":"jedateproppos")+'"><div class="jedatepropcon"><div class="jedatehmstitle">时间选择<div class="jedatehmsclose">&times;</div></div><div class="jedateproptext">小时</div><div class="jedateproptext">分钟</div><div class="jedateproptext">秒数</div><div class="jedatehmscon jedateprophours"></div><div class="jedatehmscon jedatepropminutes"></div><div class="jedatehmscon jedatepropseconds"></div></div></div>',j=h?p+y+g:u?p+v+g:p+y+'<ol class="jedaol"></ol><ul class="jedaul"></ul>'+v+g;o.html(j),P.isBool(a.isClear)||P.isShow(o.find(".jedatebot .jedateclear"),!1),h||P.isBool(a.isToday)||P.isShow(o.find(".jedatebot .jedatetodaymonth"),!1),P.isBool(a.isOk)||P.isShow(o.find(".jedatebot .jedateok")[0],!1),/\hh-mm/.test(c)?(m=function(t){var e;e=""!=s.val()||""!=s.text()?t?[l[0],l[1],l[2]]:[l[3],l[4],l[5]]:[P.currDate.getHours(),P.currDate.getMinutes(),P.currDate.getSeconds()],o.find(".jedatebot .jedatehms input").each(function(t){$(this).val(P.digit(e[t])),P.isBool(a.ishmsVal)||$(this).attr("readOnly","true")})},u?(m(!0),o.find(".jedateyear").text(P.currDate.getFullYear()+"年"),o.find(".jedatemonth").text(P.digit(P.currDate.getMonth()+1)+"月")):P.isBool(a.isTime)?m(!1):(P.isShow(o.find(".jedatebot .jedatehmsshde"),!1),o.find(".jedatebot .jedatebtn").css("width","100%"))):(h||P.isShow(o.find(".jedatebot .jedatehmsshde"),!1),o.find(".jedatebot .jedatebtn").css("width","100%")),/\YYYY-MM-DD/.test(c)&&($.each(P.weeks,function(t,e){r+='<li class="weeks" data-week="'+e+'">'+e+"</li>"}),o.find(".jedaol").html(r),i.createDaysHtml(P.currDate.getFullYear(),P.currDate.getMonth()+1,a),i.chooseYM(a)),h&&(f=o.find(".jedateym .jedateyearmonth"),"YYYY"==c?(f.attr("data-onyy",l[0]).text(l[0]+"年"),o.find(".jedayy").html(i.onlyYear(l[0]))):(f.attr("data-onym",l[0]+"-"+P.digit(l[1])).text(l[0]+"年"+N(l[1])+"月"),o.find(".jedaym").html(i.onlyYMStr(l[0],N(l[1])))),i.onlyYMevents(l,a)),i.orien(o,s),setTimeout(function(){a.success&&a.success(s)},2),i.events(l,a)},u.createDaysHtml=function(t,e,s){var a=$(P.boxCell),n=N(t),i=N(e),o="",r=0,l=P.minDate.match(T),d=l[0]+l[1]+l[2],c=P.maxDate.match(T),h=c[0]+c[1]+c[2];a.find(".jedaul").html("");var u=new Date(n,i-1,1).getDay()||7,m=P.getDaysNum(n,i),f=P.getPrevMonth(n,i),p=P.getDaysNum(n,f.m),y=P.getNextMonth(n,i),g=P.currDate.getFullYear()+"-"+P.digit(P.currDate.getMonth()+1)+"-"+P.digit(1),v=n+"-"+P.digit(i)+"-"+P.digit(1);a.find(".jedateyear").attr("year",n).text(n+"年"),a.find(".jedatemonth").attr("month",i).text(i+"月");for(var j=function(t,e,a){var n=s.marks;return $.isArray(n)&&0<n.length&&function(t,e){for(var a=t.length;a--;)if(t[a]===e)return!0;return!1}(n,t+"-"+P.digit(e)+"-"+P.digit(a))?'<i class="marks"></i>':""},D=function(t,e,a){var n,i;return 1==s.festival?'<p><span class="solar">'+a+'</span><span class="lunar">'+(""!=((i=(n=jeLunar(t,e-1,a)).solarFestival||n.lunarFestival)&&n.jieqi)?i:n.jieqi||n.showInLunar)+"</span></p>":'<p class="nolunar">'+a+"</p>"},Y=function(t,e,a,n){var i=(t+"-"+P.digit(e)+"-"+P.digit(a)).replace(/\-/g,"");if(n){if(N(i)>=N(d)&&N(i)<=N(h))return!0}else if(N(d)>N(i)||N(h)<N(i))return!0},x=p-u+1;x<=p;x++,r++){var M=j(f.y,f.m,x),b=Y(f.y,f.m,x,!1)?"disabled":"other";o+='<li year="'+f.y+'" month="'+f.m+'" day="'+x+'" class='+b+">"+(D(f.y,f.m,x)+M)+"</li>"}for(var w=1;w<=m;w++,r++){var k="",C=j(n,i,w),F=n+"-"+P.digit(i)+"-"+P.digit(w);o+='<li year="'+n+'" month="'+i+'" day="'+w+'" '+(""!=(k=Y(n,i,w,!0)?P.ymdDate==F||g!=v&&v==F?"action":"":"disabled")?"class="+k:"")+">"+(D(n,i,w)+C)+"</li>"}for(var H=1,S=42-r;H<=S;H++){var L=j(y.y,y.m,H),I=Y(y.y,y.m,H,!1)?"disabled":"other";o+='<li year="'+y.y+'" month="'+y.m+'" day="'+H+'" class='+I+">"+(D(y.y,y.m,H)+L)+"</li>"}a.find(".jedaul").html(o),this.chooseDays(s)},u.onlyYMStr=function(r,l){var d="";return $.each(P.montharr,function(t,e){var a=P.parseMatch(P.minDate),n=P.parseMatch(P.maxDate),i=new Date(r,P.digit(e),"01"),s=new Date(a[0],a[1],a[2]),o=new Date(n[0],n[1],n[2]);d+=i<s||o<i?"<li class='disabled' ym='"+r+"-"+P.digit(e)+"'>"+r+"年"+P.digit(e)+"月</li>":"<li "+(l==e?'class="action"':"")+' ym="'+r+"-"+P.digit(e)+'">'+r+"年"+P.digit(e)+"月</li>"}),d},u.onlyYear=function(r){var l="";return P.yearArr=new Array(15),$.each(P.yearArr,function(t){var e=P.parseMatch(P.minDate),a=P.parseMatch(P.maxDate),n=e[0],i=a[0],s=r-7+t,o=$(P.boxCell).find(".jedateym .jedateyearmonth").attr("data-onyy");l+=s<n||i<s?"<li class='disabled' yy='"+s+"'>"+s+"年</li>":"<li "+(o==s?'class="action"':"")+" yy='"+s+"'>"+s+"年</li>"}),l},u.setStrhms=function(r){var t,e,a,n,i,s,o,l=$(P.boxCell),d=P.format,c=[],h=l.find(".jedatehms li"),u=l.find(".jedatepropcon .jedateproptext"),m=l.find(".jedatepropcon .jedatehmscon"),f="hh-mm"==(e=(t=d).match(T).join("-"),a="YYYY-MM-DD-hh-mm"==e?t.split(" "):e,("YYYY-MM-DD-hh-mm"==e?a[1]:a).match(T).join("-"));return f&&(n=h.css("width").replace(/\px|em|rem/g,""),i=l.find(".jedatehms i").css("width").replace(/\px|em|rem/g,""),s=u.css("width").replace(/\px|em|rem/g,""),o=Math.round(N(n)+N(n)/2+N(i)/2),h[0].style.width=h[1].style.width=o+"px",u[0].style.width=u[1].style.width=m[0].style.width=m[1].style.width=Math.round(N(s)+N(s)/2+2)+"px"),$.each([24,60,60],function(t,e){var a="",n="",i=l.find(".jedatehms input"),s=i.eq(t).val();i.eq(t).attr("maxlength",2).attr("numval",e-1).attr("item",t);for(var o=0;o<e;o++){o=P.digit(o);r.ishmsLimit?n=o<s?"disabled":o==s?"action":"":(n=f&&2==t?s==o?"disabled action":"disabled":s==o?"action":"",f&&2==t&&(h.eq(2).css({display:"none"}).prev().css({display:"none"}),u.eq(t).css({display:"none"}),m.eq(t).css({display:"none"}))),a+='<p class="'+n+'">'+o+"</p>"}c.push(a)}),c},u.onlyYMevents=function(t,a){var n,i=this,s=$(P.boxCell),o=s.find(".jedateym .ymprev"),e=s.find(".jedateym .ymnext"),r=N(t[0]),l=parseFloat(t[1]);$.each([o,e],function(t,e){e.on("click",function(t){t.stopPropagation(),"YYYY"==P.checkFormat(P.format)?(n=e==o?s.find(".jedayy li").attr("yy"):s.find(".jedayy li").eq(P.yearArr.length-1).attr("yy"),s.find(".jedayy").html(i.onlyYear(N(n)))):(n=e==o?--r:r+=1,s.find(".jedaym").html(i.onlyYMStr(n,l))),i.ymPremNextEvents(a)})})},u.nongliorien=function(t,e,a){var n=e[0].getBoundingClientRect(),i=n.right+t[0].offsetWidth/1.5>=P.winarea(1)?n.right-t[0].offsetWidth:n.left+(a?0:P.docScroll(1)),s=n.bottom+ +t[0].offsetHeight<=P.winarea()?n.bottom-1:n.top>t[0].offsetHeight/1.5?n.top-t[0].offsetHeight-1:P.winarea()-t[0].offsetHeight;return{top:Math.max(s+(a?0:P.docScroll())+1,1)+"px",left:i+"px"}},u.chooseDays=function(h){var r=this,l=r.valCell,d=$(P.boxCell);d.find(".jedaul li").on("click",function(t){var e,a,n,i,s=$(this),o=[];s.hasClass("disabled")||(t.stopPropagation(),d.find(".jedatehms input").each(function(){o.push($(this).val())}),e=N(s.attr("year")),a=parseFloat(s.attr("month")),n=parseFloat(s.attr("day")),i=P.parse([e,a,n],[o[0],o[1],o[2]],P.format),P.isValHtml(l)?l.val(i):l.text(i),r.dateClose(),h.festival&&$("#jedatetipscon").remove(),($.isFunction(h.choosefun)||null!=h.choosefun)&&h.choosefun&&h.choosefun(l,i))}),h.festival&&d.find(".jedaul li").on("mouseover",function(){var t=$(this),e=N(t.attr("year")),a=parseFloat(t.attr("month")),n=parseFloat(t.attr("day")),i=$("<div/>",{id:"jedatetipscon",class:"jedatetipscon"}),s=jeLunar(e,a-1,n),o="<p>"+s.solarYear+"年"+s.solarMonth+"月"+s.solarDate+"日 "+s.inWeekDays+'</p><p class="red">农历：'+s.shengxiao+"年 "+s.lnongMonth+"月"+s.lnongDate+"</p><p>"+s.ganzhiYear+"年 "+s.ganzhiMonth+"月 "+s.ganzhiDate+"日</p>",r=""!=(s.solarFestival||s.lunarFestival)?'<p class="red">节日：'+s.solarFestival+s.lunarFestival+"</p>":"",l=""!=s.jieqi?'<p class="red">'+(""!=s.jieqi?"节气："+s.jieqi:"")+"</p>":"",d=""!=(s.solarFestival||s.lunarFestival||s.jieqi)?r+l:"";$("body").append(i),i.html(o+d);var c=u.nongliorien(i,t);i.css({"z-index":null==h.zIndex?2104:h.zIndex+5,top:c.top,left:c.left,position:"absolute",display:"block"})}).on("mouseout",function(){0<$("#jedatetipscon").length&&$("#jedatetipscon").remove()})},u.chooseYM=function(s){var o=this,n=$(P.boxCell),r=n.find(".jedatetopym"),t=n.find(".jedateyy"),e=n.find(".jedatemm"),l=n.find(".jedateyy .jedateyear"),d=n.find(".jedatemm .jedatemonth"),a=n.find(".jedateymchri"),c=n.find(".jedateymchle"),i="hh-mm"==P.checkFormat(P.format).substring(0,5),h=P.minDate.match(T),u=h[0]+h[1],m=P.maxDate.match(T),f=m[0]+m[1];function p(n){var i,s="";return $.each(new Array(15),function(t,e){var a;7===t?(a=l.attr("year"),i=N(n)>=N(h[0])&&N(n)<=N(m[0])?a==n?'class="action"':"":'class="disabled"',s+="<li "+i+' yy="'+n+'">'+n+"年</li>"):(i=N(n-7+t)>=N(h[0])&&N(n-7+t)<=N(m[0])?"":'class="disabled"',s+="<li "+i+' yy="'+(n-7+t)+'">'+(n-7+t)+"年</li>")}),s}function y(t,e){var i="";12==e?($.each(P.montharr,function(t,e){var a=d.attr("month"),e=P.digit(e),n=N(l.attr("year")+e)>=N(u)&&N(l.attr("year")+e)<=N(f)?P.digit(a)==e?'class="action"':"":'class="disabled"';i+="<li "+n+' mm="'+e+'">'+e+"月</li>"}),$.each([a,c],function(t,e){P.isShow(e,!1)})):(i=p(t),$.each([a,c],function(t,e){P.isShow(e,!0)})),r.removeClass(12==e?"jedatesety":"jedatesetm").addClass(12==e?"jedatesetm":"jedatesety"),n.find(".jedatetopym .ymdropul").html(i),P.isShow(r,!0)}function g(i){n.find(".ymdropul li").on("click",function(t){var e=$(this),a=e.attr("yy"),n=N(d.attr("month"));e.hasClass("disabled")||(t.stopPropagation(),i.attr("year",a).html(a+"年"),P.isShow(r,!1),o.createDaysHtml(a,n,s))})}i||t.on("click",function(){var t=$(this),e=N(t.attr("ym"));y(N(l.attr("year")),e),g(l)}),i||e.on("click",function(){var t=$(this),e=N(t.attr("ym"));y(N(l.attr("year")),e),n.find(".ymdropul li").on("click",function(t){var e,a,n;$(this).hasClass("disabled")||(t.stopPropagation(),e=$(this),a=l.attr("year"),n=N(e.attr("mm")),d.attr("month",n).html(n+"月"),P.isShow(r,!1),o.createDaysHtml(a,n,s))})}),n.find(".jedateymchok").on("click",function(t){t.stopPropagation(),P.isShow(r,!1)});var v=N(l.attr("year"));$.each([c,a],function(a,t){t.on("click",function(t){t.stopPropagation(),0==a?v-=15:v+=15;var e=p(v);n.find(".jedatetopym .ymdropul").html(e),g(l)})})},u.ymPremNextEvents=function(n){var i=this,s=i.valCell,t=$(P.boxCell),o=new Date,r="YYYY"==P.checkFormat(P.format);(r?t.find(".jedayy li"):t.find(".jedaym li")).on("click",function(t){var e,a;$(this).hasClass("disabled")||(t.stopPropagation(),e=r?$(this).attr("yy").match(T):$(this).attr("ym").match(T),a=r?P.parse([e[0],o.getMonth()+1,1],[0,0,0],P.format):P.parse([e[0],e[1],1],[0,0,0],P.format),P.isValHtml(s)?s.val(a):s.text(a),i.dateClose(),!$.isFunction(n.choosefun)&&null==n.choosefun||n.choosefun(s,a))})},u.events=function(j,D){var a,t,e,n,i,Y=this,x=Y.valCell,M=$(P.boxCell),b=new Date,s=M.find(".yearprev"),o=M.find(".yearnext"),r=M.find(".monthprev"),l=M.find(".monthnext"),w=M.find(".jedateyear"),k=M.find(".jedatemonth"),C="YYYY-MM"==P.checkFormat(P.format)||"YYYY"==P.checkFormat(P.format),F="hh-mm"==P.checkFormat(P.format).substring(0,5);C?(Y.ymPremNextEvents(D),M.find(".jedatebot .jedatetodaymonth").on("click",function(t){t.stopPropagation();var e=[b.getFullYear(),b.getMonth()+1,b.getDate()],a=P.parse([e[0],e[1],0],[0,0,0],P.format);P.isValHtml(x)?x.val(a):x.text(a),Y.dateClose(),!$.isFunction(D.choosefun)&&null==D.choosefun||D.choosefun(x,a)})):(F||$.each([s,o],function(t,i){i.on("click",function(t){var e,a,n;"block"!=M.find(".jedatetopym").css("display")&&(t.stopPropagation(),e=N(w.attr("year")),a=N(k.attr("month")),n=i==s?--e:++e,Y.createDaysHtml(n,a,D))})}),F||$.each([r,l],function(t,s){s.on("click",function(t){var e,a,n,i;"block"!=M.find(".jedatetopym").css("display")&&(t.stopPropagation(),e=N(w.attr("year")),a=N(k.attr("month")),n=P.getPrevMonth(e,a),i=P.getNextMonth(e,a),s==r?Y.createDaysHtml(n.y,n.m,D):Y.createDaysHtml(i.y,i.m,D))})}),a=Y.setStrhms(D),t=function(t){$.each(t,function(t,e){""==e.html()&&e.html(a[t])}),F?(P.isShow(M.find(".jedatehmsclose"),!1),P.isShow(M.find(".jedatetodaymonth"),!1)):P.isShow(M.find(".jedateprophms"),!0),$.each(["hours","minutes","seconds"],function(e,t){var a=M.find(".jedateprop"+t),n=M.find(".jedateprop"+t+" .action");a[0].scrollTop=n[0].offsetTop-146;var i=M.find(".jedateprop"+t+" p");i.on("click",function(){var t=$(this);t.hasClass("disabled")||(i.each(function(){$(this).removeClass("action")}),t.addClass("action"),M.find(".jedatebot .jedatehms input").eq(e).val(P.digit(t.text())),F||P.isShow(M.find(".jedateprophms"),!1))})})},e=M.find(".jedateprophours"),n=M.find(".jedatepropminutes"),i=M.find(".jedatepropseconds"),F?t([e,n,i]):M.find(".jedatehms").on("click",function(){"block"!==M.find(".jedateprophms").css("display")&&t([e,n,i]),M.find(".jedateprophms .jedatehmsclose").on("click",function(){P.isShow(M.find(".jedateprophms"),!1)})}),M.find(".jedatebot .jedatetodaymonth").on("click",function(){var t=[b.getFullYear(),b.getMonth()+1,b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds()],e=P.parse([t[0],t[1],t[2]],[t[3],t[4],t[5]],P.format);Y.createDaysHtml(t[0],t[1],D),P.isValHtml(x)?x.val(e):P.text(e),Y.dateClose(),!$.isFunction(D.choosefun)&&null==D.choosefun||D.choosefun(x,e),C||Y.chooseDays(D)})),M.find(".jedatehms input").on("keyup",function(){var t=$(this),e=t.val(),a=N(t.attr("numval")),n=N(t.attr("item"));t.val(e.replace(/\D/g,"")),a<e&&(t.val(a),alert("输入值不能大于"+a)),""==e&&t.val("00"),M.find(".jedatehmscon").eq(n).children().each(function(){$(this).removeClass("action")}),M.find(".jedatehmscon").eq(n).children().eq(N(t.val().replace(/^0/g,""))).addClass("action"),$.each(["hours","minutes","seconds"],function(t,e){var a=M.find(".jedateprop"+e),n=M.find(".jedateprop"+e+" .action");a[0].scrollTop=n[0].offsetTop-118})}),M.find(".jedatebot .jedateclear").on("click",function(t){t.stopPropagation();var e=P.isValHtml(x)?x.val():x.text();P.isValHtml(x)?x.val(""):x.text(""),Y.dateClose(),""!=e&&(P.isBool(D.clearRestore)&&(P.minDate=D.startMin||P.minDate,P.maxDate=D.startMax||P.maxDate),!$.isFunction(D.clearfun)&&null==D.clearfun||D.clearfun(x,e))}),M.find(".jedatebot .jedateok").on("click",function(t){t.stopPropagation();function e(){var t=[];return M.find(".jedatehms input").each(function(){t.push($(this).val())}),t}var a,n,i,s,o,r,l,d,c,h,u=""!=(x.val()||x.text()),m="YYYY"==P.checkFormat(P.format),f="",p=P.minDate.match(T),y=p[0]+p[1]+p[2],g=P.maxDate.match(T),v=g[0]+g[1]+g[2];u?(a=(P.isValHtml(x)?x.val():x.text()).match(T),C?(n=m?M.find(".jedayy .action"):M.find(".jedaym .action"),f=m?(h=n?n.attr("yy").match(T):a,P.parse([N(h[0]),b.getMonth()+1,1],[0,0,0],P.format)):(i=n?n.attr("ym").match(T):a,P.parse([N(i[0]),N(i[1]),1],[0,0,0],P.format))):(s=e(),o=[N(w.attr("year")),N(k.attr("month")),a[2]],l=N(r=o[0]+o[1]+o[2])>=N(y)&&N(r)<=N(v),f=u&&l?P.parse([o[0],o[1],o[2]],[s[0],s[1],s[2]],P.format):P.parse([a[0],a[1],a[2]],[s[0],s[1],s[2]],P.format),F||Y.createDaysHtml(o[0],o[1],D),Y.chooseDays(D))):(d=e(),c=M.find(".jedateyearmonth")[0],h="",f=F?P.parse([j[0],j[1],j[2]],[d[0],d[1],d[2]],P.format):(h=C?"YYYY"==P.checkFormat(P.format)?c.attr("data-onyy").match(T):c.attr("data-onym").match(T):[b.getFullYear(),b.getMonth()+1,b.getDate()],m?P.parse([N(h[0]),b.getMonth(),1],[0,0,0],P.format):P.parse([N(h[0]),N(h[1]),b.getDate()],[d[0],d[1],d[2]],P.format))),P.isValHtml(x)?x.val(f):x.text(f),Y.dateClose(),!$.isFunction(D.okfun)&&null==D.okfun||D.okfun(P.elemCell,f)}),$(document).on("mouseup",function(t){t.stopPropagation();var e=$(P.boxCell);e&&"none"!==e.css("display")&&e.remove()}),$(P.boxCell).on("mouseup",function(t){t.stopPropagation()})},$.dateVer="3.7",$.nowDate=function(t){return P.initDates(t)},$.getLunar=function(t){if(/\YYYY-MM-DD/.test(P.formatType)){var e=t.substr(0,4).replace(/^(\d{4})/g,"$1,")+t.substr(4).replace(/^(\d{2})(?=\d)/g,"$1,"),a=P.IsNum(t)?e.match(T):t.match(T),n=jeLunar(a[0],a[1]-1,a[2]);return{nMonth:n.lnongMonth,nDays:n.lnongDate,yYear:N(n.solarYear),yMonth:N(n.solarMonth),yDays:N(n.solarDate),cWeek:n.inWeekDays,nWeek:n.solarWeekDay}}},$.addDate=function(t,e,a){return e|=0,a=a||"DD",P.addDateTime(t,e,a,P.format)},a}),function(t){function n(t){function e(t,e){return new Date(31556925974.7*(t-1900)+6e4*c[e]+Date.UTC(1900,0,6,2,5)).getUTCDate()}function a(t){return h.charAt(t%10)+u.charAt(t%12)}function s(t,e){return d[t-1900]&65536>>e?30:29}function n(t){return t<10?"0"+(0|t):t}function i(t,e){var a=t;return e.replace(/dd?d?d?|MM?M?M?|yy?y?y?/g,function(t){switch(t){case"yyyy":var e="000"+a.getFullYear();return e.substring(e.length-4);case"dd":return n(a.getDate());case"d":return a.getDate().toString();case"MM":return n(a.getMonth()+1);case"M":return a.getMonth()+1}})}var o=function(t){return r(t)?65536&d[t-1900]?30:29:0},r=function(t){return 15&d[t-1900]};this.isToday=!1,this.isRestDay=!1,this.solarYear=i(t,"yyyy"),this.solarMonth=i(t,"M"),this.solarDate=i(t,"d"),this.solarWeekDay=t.getDay(),this.inWeekDays="星期"+p.charAt(this.solarWeekDay);var l=new function(t){var e,a,n=0,i=(t-new Date(1900,0,31))/864e5;for(this.dayCyl=i+40,this.monCyl=14,e=1900;e<2050&&0<i;e++)i-=n=function(t){for(var e=348,a=32768;8<a;a>>=1)e+=d[t-1900]&a?1:0;return e+o(t)}(e),this.monCyl+=12;for(i<0&&(i+=n,e--,this.monCyl-=12),this.year=e,this.yearCyl=e-1864,a=r(e),this.isLeap=!1,e=1;e<13&&0<i;e++)n=0<a&&e==a+1&&0==this.isLeap?(--e,this.isLeap=!0,o(this.year)):s(this.year,e),1==this.isLeap&&e==a+1&&(this.isLeap=!1),i-=n,0==this.isLeap&&this.monCyl++;0==i&&0<a&&e==a+1&&(this.isLeap?this.isLeap=!1:(this.isLeap=!0,--e,--this.monCyl)),i<0&&(i+=n,--e,--this.monCyl),this.month=e,this.day=i+1}(t);this.lunarYear=l.year,this.shengxiao=m.charAt((this.lunarYear-4)%12),this.lunarMonth=l.month,this.lunarIsLeapMonth=l.isLeap,this.lnongMonth=this.lunarIsLeapMonth?"闰"+y[l.month-1]:y[l.month-1],this.lunarDate=l.day,this.showInLunar=this.lnongDate=function(t){var e;switch(t){case 10:e="初十";break;case 20:e="二十";break;case 30:e="三十";break;default:e="初十廿卅".charAt(Math.floor(t/10)),e+=p.charAt(t%10)}return e}((this.lunarMonth,this.lunarDate)),1==this.lunarDate&&(this.showInLunar=this.lnongMonth+"月"),this.ganzhiYear=a(l.yearCyl),this.ganzhiMonth=a(l.monCyl),this.ganzhiDate=a(l.dayCyl++),this.jieqi="",this.restDays=0,e(this.solarYear,2*(this.solarMonth-1))==i(t,"d")&&(this.showInLunar=this.jieqi=f[2*(this.solarMonth-1)]),e(this.solarYear,2*(this.solarMonth-1)+1)==i(t,"d")&&(this.showInLunar=this.jieqi=f[2*(this.solarMonth-1)+1]),"清明"==this.showInLunar&&(this.showInLunar="清明节",this.restDays=1),this.solarFestival=g[i(t,"MM")+i(t,"dd")],void 0===this.solarFestival?this.solarFestival="":/\*(\d)/.test(this.solarFestival)&&(this.restDays=parseInt(RegExp.$1),this.solarFestival=this.solarFestival.replace(/\*\d/,"")),this.showInLunar=""==this.solarFestival?this.showInLunar:this.solarFestival,this.lunarFestival=v[this.lunarIsLeapMonth?"00":n(this.lunarMonth)+n(this.lunarDate)],void 0===this.lunarFestival?this.lunarFestival="":/\*(\d)/.test(this.lunarFestival)&&(this.restDays=this.restDays>parseInt(RegExp.$1)?this.restDays:parseInt(RegExp.$1),this.lunarFestival=this.lunarFestival.replace(/\*\d/,"")),12==this.lunarMonth&&this.lunarDate==s(this.lunarYear,12)&&(this.lunarFestival=v["0100"],this.restDays=1),this.showInLunar=""==this.lunarFestival?this.showInLunar:this.lunarFestival}var d,c,h,u,m,f,p,y,g,v;t.jeLunar=(t.jeLunar,d=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42448,83315,21200,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46496,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19415,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448],c=[0,21208,43467,63836,85337,107014,128867,150921,173149,195551,218072,240693,263343,285989,308563,331033,353350,375494,397447,419210,440795,462224,483532,504758],h="甲乙丙丁戊己庚辛壬癸",u="子丑寅卯辰巳午未申酉戌亥",m="鼠牛虎兔龙蛇马羊猴鸡狗猪",f=["小寒","大寒","立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至"],p="日一二三四五六七八九十",y=["正","二","三","四","五","六","七","八","九","十","十一","腊"],g={"0101":"*1元旦节","0202":"湿地日","0214":"情人节","0308":"妇女节","0312":"植树节","0315":"消费者权益日","0401":"愚人节","0422":"地球日","0501":"*1劳动节","0504":"青年节","0512":"护士节","0518":"博物馆日","0520":"母亲节","0601":"儿童节","0623":"奥林匹克日","0630":"父亲节","0701":"建党节","0801":"建军节","0903":"抗战胜利日","0910":"教师节",1001:"*3国庆节",1201:"艾滋病日",1224:"平安夜",1225:"圣诞节"},v={"0100":"除夕","0101":"*2春节","0115":"元宵节","0505":"*1端午节","0707":"七夕节","0715":"中元节","0815":"*1中秋节","0909":"*1重阳节",1015:"下元节",1208:"腊八节",1223:"小年"},function(t,e,a){return new n(new Date(t,e,a))})}(void 0);